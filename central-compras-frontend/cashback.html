<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cashback — Central de Compras</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">Central de Compras</div>
    <nav>
      <a href="dashboard.html">Dashboard</a>
      <a href="fornecedores.html">Fornecedores</a>
      <a href="campanhas.html">Campanhas</a>
      <a href="cashback.html">Cashback</a>
      <a href="index.html">Sair</a>
    </nav>
  </header>

  <main class="container">
    <h1>Cashback</h1>
    <div class="card">
      <p>Saldo disponível: <strong>R$ <span id="saldo">0.00</span></strong></p>
      <p class="muted">No início de cada mês será feito o confronto com faturamento do fornecedor. Aqui simulamos saldo acumulado.</p>
      <h3>Informar chave PIX</h3>
      <form id="pixForm">
        <label>Chave PIX</label>
        <input id="pixKey" placeholder="CPF/CNPJ, email ou chave aleatória" />
        <label>Nome do favorecido</label>
        <input id="pixName" />
        <div class="row between">
          <button class="btn alt" type="button" onclick="location.href='dashboard.html'">Voltar</button>
          <button class="btn primary" type="submit">Solicitar Pagamento</button>
        </div>
      </form>
    </div>
  </main>

  <script src="js/data.js"></script>
  <script src="js/app.js"></script>
  <script>
    appAuth.maybeRequireLogin();
    document.getElementById('saldo').textContent = db.getCashback().toFixed(2);

    document.getElementById('pixForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      const chave = document.getElementById('pixKey').value.trim();
      const nome = document.getElementById('pixName').value.trim();
      if(!chave || !nome) { alert('Preencha chave e nome'); return; }
      alert('Solicitação enviada. Em um sistema real, o admin do fornecedor validaria o pagamento.');
    });
  </script>
</body>
</html>
